# 部署检查清单

在开始测试之前，请按照此清单完成所有必要步骤。

## ✅ 阶段一：前端部署（Mock版本）

### 1. 准备工作

- [ ] 确认已克隆/下载完整项目
- [ ] 确认Chrome版本 ≥ 88
- [ ] 如测试移动端，确认已安装Kiwi Browser

### 2. 生成图标 ⭐ 必须完成

**选择以下任一方法：**

#### 方法A：使用HTML工具（推荐）

```bash
# 1. 打开图标生成器
open extension/icons/generate-icons.html
# (或在浏览器中直接打开)

# 2. 点击"Download All"按钮

# 3. 将下载的3个文件保存为：
#    - icon16.png
#    - icon48.png  
#    - icon128.png

# 4. 放置到 extension/icons/ 目录
```

#### 方法B：使用ImageMagick

```bash
cd extension/icons
convert -size 16x16 xc:'#667eea' icon16.png
convert -size 48x48 xc:'#667eea' icon48.png
convert -size 128x128 xc:'#667eea' icon128.png
```

#### 方法C：使用在线工具

访问 https://www.favicon-generator.org/ 上传任意图片生成

### 3. 验证图标

```bash
# 确认以下文件存在：
ls -la extension/icons/

# 应该看到：
# icon16.png
# icon48.png
# icon128.png
```

### 4. 加载Chrome扩展

**步骤：**

1. 打开Chrome浏览器
2. 在地址栏输入并访问：`chrome://extensions/`
3. 开启右上角的 **"开发者模式"** 开关
4. 点击左上角 **"加载已解压的扩展程序"**
5. 选择项目中的 `extension` 文件夹
6. 点击"选择文件夹"

**预期结果：**

- ✅ 扩展出现在列表中
- ✅ 显示名称："智能英语单词助手"
- ✅ 显示版本：1.0.0
- ✅ 图标正常显示
- ✅ 没有错误提示

**如果出现错误：**

- 检查图标文件是否存在
- 检查manifest.json语法
- 查看错误详情并解决

### 5. 快速功能测试

#### 测试A：使用测试页面

```bash
# 在浏览器中打开
open test.html
```

- [ ] 页面加载正常
- [ ] 看到部分单词被标记（可能有下划线或颜色）
- [ ] PC端：鼠标悬停在标记的单词上，显示翻译浮层
- [ ] 浮层显示单词、音标和中文释义
- [ ] 点击浮层中的"✓"按钮，浮层消失
- [ ] 双击未标记的单词，也能显示翻译（或提示暂无数据）

#### 测试B：使用真实网页

推荐测试网站：
- https://www.bbc.com/news
- https://medium.com/
- https://en.wikipedia.org/

- [ ] 访问上述网站之一
- [ ] 等待页面完全加载（2-3秒）
- [ ] 观察是否有单词被标记
- [ ] 测试悬停/点击交互

#### 测试C：Popup界面

- [ ] 点击Chrome工具栏中的扩展图标
- [ ] Popup界面正常显示
- [ ] 看到"启用插件"开关（应为开启状态）
- [ ] 看到统计数据（可能为0）
- [ ] 可以选择英语水平（默认B1）

### 6. 完整功能检查

#### PC端功能

- [ ] **悬停显示**：鼠标移到标记单词上显示翻译
- [ ] **悬停隐藏**：鼠标移出后延迟隐藏（约300ms）
- [ ] **双击翻译**：双击任意单词强制显示翻译
- [ ] **标记已知**：点击"✓"按钮后该词不再显示翻译
- [ ] **浮层定位**：浮层显示在单词附近，不遮挡文字
- [ ] **滚动适应**：滚动页面时浮层正确隐藏/重新定位

#### 移动端功能（如测试）

- [ ] **点击切换**：点击标记单词显示/隐藏翻译
- [ ] **长按翻译**：长按未标记单词（保持500ms）显示翻译
- [ ] **点击外部**：点击浮层外部区域隐藏翻译
- [ ] **触摸区域**：关闭按钮足够大，容易点击
- [ ] **边界检测**：浮层不超出屏幕边界

#### Popup功能

- [ ] **开关插件**：切换开关可以启用/禁用扩展
- [ ] **统计更新**：标记单词后统计数字增加
- [ ] **水平设置**：可以选择A1-C2不同等级
- [ ] **词汇列表**：显示已掌握的单词列表
- [ ] **清除历史**：点击清除按钮后数据被清空

### 7. 性能检查

- [ ] 页面加载速度正常（与未安装扩展时相比差异<200ms）
- [ ] 浏览器内存占用正常（打开任务管理器检查）
- [ ] 交互响应流畅，无明显卡顿
- [ ] 大量文本页面也能正常工作

### 8. 兼容性检查

- [ ] Chrome桌面版：✅ 正常工作
- [ ] Edge桌面版：✅ 应该也能工作（如测试）
- [ ] Kiwi Browser：✅ 需要测试（如有条件）

### 9. 调试和日志

打开浏览器控制台（F12 → Console）查看日志：

```
预期看到的日志：
[VocabHelper] Initializing...
[VocabHelper] DOM ready, starting initialization
[TextProcessor] Starting page processing
[TextProcessor] Processed 234 words
[TranslationTooltip] Tooltip created
```

- [ ] 没有红色错误信息
- [ ] 可以看到正常的调试日志
- [ ] 如有警告，确认是否影响功能

### 10. 常见问题排查

#### 问题：没有单词被标记

**可能原因：**
1. 扩展被禁用 → 检查Popup开关
2. 页面没有英文单词 → 换个英文网页
3. JavaScript错误 → 查看控制台

**解决方法：**
- 刷新页面（F5）
- 重新加载扩展
- 查看控制台错误

#### 问题：翻译浮层不显示

**可能原因：**
1. 单词未被标记（不在难词库）→ 尝试双击/长按
2. Shadow DOM未创建 → 检查控制台错误
3. CSS问题 → 检查是否有样式冲突

**解决方法：**
- 确认单词在Mock词库中（见mock-vocabulary.js）
- 尝试其他标记的单词
- 检查控制台错误

#### 问题：浮层位置不对

**可能原因：**
1. 页面有固定定位元素
2. 页面有transform变换
3. 动态内容影响布局

**解决方法：**
- 刷新页面
- 滚动到不同位置测试
- 尝试其他网页

#### 问题：移动端长按没反应

**可能原因：**
1. 长按时间不够（需500ms）
2. 手指移动了
3. 页面禁用了长按

**解决方法：**
- 确保长按时间足够
- 保持手指静止
- 尝试其他位置

---

## ✅ 部署完成确认

在继续下一步之前，确认：

- ✅ 图标已生成并放置到正确位置
- ✅ 扩展已成功加载到Chrome
- ✅ test.html页面功能正常
- ✅ 真实网页功能正常
- ✅ Popup界面功能正常
- ✅ 没有控制台错误
- ✅ 性能表现良好

**如果以上全部✅，恭喜！部署成功！**

---

## 📋 下一步：用户测试

### 测试任务

详见 `PROJECT_STATUS.md` 中的测试清单。

### 提供反馈

测试完成后，请反馈以下内容：

1. **体验评价**
   - 浮层是否影响阅读？
   - 交互是否流畅自然？
   - 翻译时机是否合理？
   - 移动端是否好用？

2. **功能问题**
   - 哪些功能工作正常？
   - 哪些功能有问题？
   - 是否有bug？
   - 是否有崩溃？

3. **改进建议**
   - 希望增加什么功能？
   - 希望改进什么体验？
   - 有什么不满意的地方？

4. **性能反馈**
   - 速度是否满意？
   - 是否有卡顿？
   - 内存占用是否可接受？

---

## 🚀 阶段二：后端部署（待开发）

阶段二的后端系统将在阶段一测试通过后开始开发。

预计包含：
- [ ] Node.js服务器部署
- [ ] 数据库初始化
- [ ] ECDICT词典导入
- [ ] API端点测试
- [ ] 前后端联调

详细计划见 `chrome.plan.md` 阶段二部分。

---

**最后更新：** 2025-11-30  
**当前状态：** ✅ 阶段一部署完成，等待用户测试

